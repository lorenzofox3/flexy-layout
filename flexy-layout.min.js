!function(t){"use strict";t.module("flexyLayout.block",[]).provider("Block",function(){function e(e){if(this.blocks=[],t.isArray(e))for(var i=0,n=e.length;n>i;i++)e[i].moveLength&&e[i].canMoveLength&&e[i].getAvailableLength&&this.blocks.push(e[i])}function i(t){this.initialLength=t>0?t:0,this.isLocked=!1,this.lengthValue=0,this.minLength=0}function n(){this.lengthValue=5,this.initialPosition={x:0,y:0},this.availableLength={before:0,after:0},this.ghostPosition={x:0,y:0}}e.prototype.moveLength=function(t){for(var e,i=0,n=t,o=0,l=this.blocks.length;l>o;o++)this.blocks[o].canMoveLength(t)===!0&&i++;for(var r=0;i>0;r++)e=this.blocks[r].moveLength(t/i),t-=e,Math.abs(e)>0&&i--;return n-t},e.prototype.canMoveLength=function(t){for(var e=0,i=this.blocks.length;i>e;e++)if(this.blocks[e].canMoveLength(t)===!0)return!0;return!1},e.prototype.getAvailableLength=function(){for(var t=0,e=0,i=this.blocks.length;i>e;e++)t+=this.blocks[e].getAvailableLength();return t},e.prototype.clean=function(){delete this.blocks},i.prototype.moveLength=function(e){if(this.isLocked===!0)return 0;var i=this.lengthValue;return t.isNumber(e)&&(this.lengthValue=Math.max(0,this.lengthValue+e)),this.lengthValue-i},i.prototype.canMoveLength=function(t){return!(this.isLocked===!0||0>t&&0===this.getAvailableLength())},i.prototype.getAvailableLength=function(){return this.isLocked===!0?0:this.lengthValue-this.minLength},n.prototype.canMoveLength=function(){return!1},n.prototype.moveLength=function(){return 0},n.prototype.getAvailableLength=function(){return 0},this.$get=function(){return{getNewComposite:function(){var i=[].slice.call(arguments);return 1===i.length&&t.isArray(i[0])&&(i=i[0]),new e(i)},getNewBlock:function(t){return new i(t)},getNewSplitter:function(){return new n},isSplitter:function(t){return t instanceof n}}}})}(angular),function(t){"use strict";t.module("flexyLayout.directives",["flexyLayout.mediator"]).directive("flexyLayout",function(){return{restrict:"E",scope:{},template:'<div class="flexy-layout" ng-transclude></div>',replace:!0,transclude:!0,controller:"mediatorCtrl",link:function(t,e,i,n){t.$watch(function(){return e[0][n.lengthProperties.offsetName]},function(){n.init()})}}}).directive("blockContainer",["Block",function(t){return{restrict:"E",require:"^flexyLayout",transclude:!0,replace:!0,scope:{},template:'<div class="block"><div class="block-content" ng-transclude></div></div>',link:function(e,i,n,o){var l=e.$eval(n.init);e.block=t.getNewBlock(l),e.$watch("block.lengthValue",function(t){i.css(o.lengthProperties.lengthName,Math.floor(t)+"px")}),o.addBlock(e.block)}}}]).directive("blockSplitter",["Block","$log",function(e){return{restrict:"E",require:"^flexyLayout",replace:!0,scope:{onSplitterStop:"=",size:"="},template:'<div class="block splitter"><div class="ghost"></div></div>',link:function(i,n,o,l){i.splitter=e.getNewSplitter(),l.onSplitterStop=i.onSplitterStop,i.size&&(l.splitterSize=i.size,"horizontal"==l.orientation?n.css("width",i.size+"px"):n.css("height",i.size+"px"));var r=n.children()[0],s=function(t){this.initialPosition.x=t.clientX,this.initialPosition.y=t.clientY,this.availableLength=l.getSplitterRange(this),l.movingSplitter=this,t.preventDefault()};l.addBlock(i.splitter),n.bind("mousedown",t.bind(i.splitter,s)),i.$watch("splitter.ghostPosition."+l.lengthProperties.position,function(t,e){t!==e&&(r.style[l.lengthProperties.positionName]=t+"px")})}}}]),t.module("flexyLayout",["flexyLayout.directives"])}(angular),function(t){"use strict";t.module("flexyLayout.mediator",["flexyLayout.block"]).controller("mediatorCtrl",["$scope","$element","$attrs","Block","$log",function(e,i,n,o){var l=[],r=null,s=0,h=this,a=["vertical","horizontal"],c=-1!==a.indexOf(n.orientation)?n.orientation:"horizontal",g="horizontal"===c?"flexy-layout-column":"flexy-layout-row";i.addClass(g),this.orientation=c,this.lengthProperties="horizontal"===c?{lengthName:"width",offsetName:"offsetWidth",positionName:"left",position:"x",eventProperty:"clientX"}:{lengthName:"height",offsetName:"offsetHeight",positionName:"top",position:"y",eventProperty:"clientY"},this.onSplitterStop=null,this.splitterSize=5,this.movingSplitter=null;var p=function(t){var e=0,i=this.lengthProperties.eventProperty,n=this.lengthProperties.position;null!==this.movingSplitter&&(e=t[i]-this.movingSplitter.initialPosition[n],this.movingSplitter.ghostPosition[n]=0>e?-1*Math.min(Math.abs(e),this.movingSplitter.availableLength.before):Math.min(e,this.movingSplitter.availableLength.after))},u=function(t){var e=0,i=this.lengthProperties.eventProperty,n=this.lengthProperties.position;null!==this.movingSplitter&&(e=t[i]-this.movingSplitter.initialPosition[n],this.moveSplitterLength(this.movingSplitter,e),this.movingSplitter.ghostPosition[n]=0,this.onSplitterStop&&this.onSplitterStop(this.movingSplitter.ghostPosition,e),this.movingSplitter=null)};i.bind("mouseup",function(i){e.$apply(t.bind(h,u,i))}),i.bind("mousemove",function(i){e.$apply(t.bind(h,p,i))}),this.addBlock=function(t){o.isSplitter(t)?r=t:(null!==r&&(l.push(r),s++,r=null),l.push(t),this.init())},this.init=function(){var t,e,n=l.length,r=i[0][this.lengthProperties.offsetName],h=o.getNewBlock();for(l.push(h),t=0;n>t;t++)e=l[t],e.isLocked=!1,o.isSplitter(e)||e.moveLength(-1e4);for(h.moveLength(r-s*this.splitterSize),t=0;n>t;t++)e=l[t],e.initialLength>0&&(this.moveBlockLength(e,e.initialLength),e.isLocked=!0);for(this.moveBlockLength(h,-1e4),t=0;n>t;t++)l[t].isLocked=!1;l.splice(n,1)},this.moveBlockLength=function(t,e){var i,n,r,s,h="object"!=typeof t?t:l.indexOf(t);0>h||0===e||h>=l.length||(s=l[h],i=l.slice(0,h).concat(l.slice(h+1,l.length)),n=o.getNewComposite(i),n.canMoveLength(-e)===!0&&s.canMoveLength(e)===!0&&(0>e?(r=-1*s.moveLength(e),n.moveLength(r)):(r=-1*n.moveLength(-e),s.moveLength(r)),n.clean()))},this.moveSplitterLength=function(t,e){var i,n,r,s=l.indexOf(t);o.isSplitter(t)&&-1!==s&&(i=o.getNewComposite(f(t,!0)),n=o.getNewComposite(f(t,!1)),i.canMoveLength(e)&&n.canMoveLength(-e)&&(0>e?(r=-1*i.moveLength(e),n.moveLength(r)):(r=-1*n.moveLength(-e),i.moveLength(r)),n.clean(),i.clean()))},this.getSplitterRange=function(t){var e=f(t,!0),i=f(t,!1),n={before:e.getAvailableLength(),after:i.getAvailableLength()};return e.clean(),i.clean(),n},this.toggleLockBlock=function(t,e){var i,n="object"!=typeof t?t:l.indexOf(t);n>=0&&n<l.length&&(i=l[n],i.isLocked=e)};var f=function(t,e){for(var i,n=l.indexOf(t),r=e===!0?l.slice(0,n):l.slice(n+1,l.length),s=e===!0?Array.prototype.pop:Array.prototype.shift,h=[];(i=s.apply(r))&&!o.isSplitter(i);)h.push(i);return o.getNewComposite(h)}}])}(angular);